<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
{{>titulo}}

<div id="map" class="container" style="height: 400px; width: 100%;"></div>

<input type="text" id="lat" name="lat">
<input type="text" id="long" name="long">
<style>
    .tituloMap{
        font-size: 16px;
    }
</style>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<script>
    var map = L.map('map').setView([-19.579006, -65.757464], 15);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    let puestos=[];
    let aux;
    //circunferencia
    {{#each puestos}}
        aux = (L.circle([{{this.lat1}}, {{this.laong1}}], {
        color: {{#if disponible}}'green'{{else}}'red'{{/if}},
        fillOpacity: 0.5,
        radius: 5
        }).addTo(map));
        aux.bindPopup(`<strong class="tituloMap">Numero: {{this.numero}}</strong>
        <br>
        Direccion: {{this.ubicacion}}
        <br>
        <strong clas="tituloMap">Bs. {{this.precio}} </strong> <br>
        <a style="color: white" href="/cliente" class="btn">Comprar</a>

        `);
        puestos.push(aux);
        /*var polygon = L.polygon([
            [{{this.lat1}}, {{this.laong1}}],
            [{{this.lat2}}, {{this.laong2}}],
            [{{this.lat3}}, {{this.laong3}}],
            [{{this.lat4}}, {{this.laong4}}],

        ]).addTo(map);*/
    {{/each}}
    function onMapClick(e){
        console.log(e);
        alert("aea"+e.latlng);
        document.getElementById('lat').value = e.latlng.lat;
        document.getElementById('long').value = e.latlng.lng;
    }
    map.on('click',onMapClick);
</script>